diff -ruN libspatialite-5.1.0/src/wfs/wfs_in.c libspatialite-5.1.0-patch/src/wfs/wfs_in.c
--- libspatialite-5.1.0/src/wfs/wfs_in.c	2023-08-04 09:51:40.000000000 +0200
+++ libspatialite-5.1.0-patch/src/wfs/wfs_in.c	2025-09-08 09:56:19.292393862 +0200
@@ -76,7 +76,13 @@
 #ifdef ENABLE_LIBXML2		/* LIBXML2 enabled: supporting XML documents */

 #include <libxml/parser.h>
+/* Some libxml2 builds may disable the deprecated HTTP layer; include
+ * nanohttp.h only when available to avoid implicit declarations.
+ */
+#ifdef LIBXML_HTTP_ENABLED
+#define LIBXML2_DEPRECATED_ALLOW
 #include <libxml/nanohttp.h>
+#endif

 #define MAX_GTYPES	28

@@ -4637,7 +4643,9 @@
 reset_wfs_http_connection (void)
 {
 /* Resets the libxml2 "nano HTTP": useful when changing the HTTP_PROXY settings */
+#ifdef LIBXML_HTTP_ENABLED
     xmlNanoHTTPCleanup ();
+#endif
 }

 #else /* LIBXML2 isn't enabled */
